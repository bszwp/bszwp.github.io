---
layout: post
title: "Linux下环境变量的设置方法"
date: 2017-05-04
tags: Linux
---

### 1.动态库路径的设置

[Linux](http://lib.csdn.net/base/linux)下调用动态库和windows不一样.linux 可执行程序是靠配置文件去读取路径的,因此有些时候需要设置路径
具体操作如下

export LD_LIBRARY_PATH=/home/.....(动态库的目录)

不过这种设置方法**只是在当前的session中有效**

你可以**修改配置文件实现任何session都有效**

### 2.环境变量的设置

一般来说，配置交叉编译工具链的时候需要指定编译工具的路径，此时就需要设置环境变量。例如我的mips-linux-gcc编译器在“/opt/au1200_rm/build_tools/bin”目录下，build_tools就是我的编译工具，则有如下三种方法来设置环境变量：

#### 1、直接用export命令：

\#export PATH=$PATH:/opt/au1200_rm/build_tools/bin
查看是否已经设好，可用命令export查看：

```
[root@localhost bin]# export
declare -x BASH_ENV="/root/.bashrc"
declare -x G_BROKEN_FILENAMES="1"
declare -x HISTSIZE="1000"
declare -x HOME="/root"
declare -x HOSTNAME="localhost.localdomain"
declare -x INPUTRC="/etc/inputrc"
declare -x LANG="zh_CN.GB18030"
declare -x LANGUAGE="zh_CN.GB18030:zh_CN.GB2312:zh_CN"
declare -x LESSOPEN="|/usr/bin/lesspipe.sh %s"
declare -x LOGNAME="root"
declare -x LS_COLORS="no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:.cmd=01;32:.exe=01;32:.com=01;32:.btm=01;32:.bat=01;32:.sh=01;32:.csh=01;32:.tar=01;31:.tgz=01;31:.arj=01;31:.taz=01;31:.lzh=01;31:.zip=01;31:.z=01;31:.Z=01;31:.gz=01;31:.bz2=01;31:.bz=01;31:.tz=01;31:.rpm=01;31:.cpio=01;31:.jpg=01;35:.gif=01;35:.bmp=01;35:.xbm=01;35:.xpm=01;35:.png=01;35:.tif=01;35:"
declare -x MAIL="/var/spool/mail/root"
declare -x OLDPWD="/opt/au1200_rm/build_tools"
declare -x PATH="/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin:/root/bin:/opt/au1200_rm/build_tools/bin"
declare -x PWD="/opt/au1200_rm/build_tools/bin"
declare -x SHELL="/bin/bash"
declare -x SHLVL="1"
declare -x SSH_ASKPASS="/usr/libexec/openssh/gnome-ssh-askpass"
declare -x SSH_AUTH_SOCK="/tmp/ssh-XX3LKWhz/agent.4242"
declare -x SSH_CLIENT="10.3.37.152 2236 22"
declare -x SSH_CONNECTION="10.3.37.152 2236 10.3.37.186 22"
declare -x SSH_TTY="/dev/pts/2"
declare -x TERM="linux"
declare -x USER="root"
declare -x USERNAME="root"
```

可以看到，环境变量已经设好，PATH里面已经有了我要加的编译器的路径。

#### 2、修改profile文件：

\#vim /etc/profile

比如:

```
#lrz and lsz setting
export FILEMANAGE_HOME=/usr/local
export PATH=$FILEMANAGE_HOME/bin:/root/node-v4.4.4-linux-x64/bin:$PATH
```

让环境变量立即生效需要执行如下命令：

\#source /etc/profile

#### 3、修改.bashrc文件：

\# vi /root/.bashrc

在里面加入：

export PATH="$PATH:/opt/au1200_rm/build_tools/bin"

后两种方法一般需要重新注销系统才能生效，最后可以通过echo命令[测试](http://lib.csdn.net/base/softwaretest)一下：

\# echo $PATH

看看输出里面是不是已经有了/my_new_path这个路径了。
\-----------------------------------------------------------------------------------

　“/bin”、“/sbin”、“/usr/bin”、“/usr/sbin”、“/usr/local/bin”等路径已经在系统环境变量中了，如果可执行文件在这几个标准位置，在终端命令行输入该软件可执行文件的文件名和参数(如果需要参数)，回车即可。

　　如果不在标准位置，文件名前面需要加上完整的路径。不过每次都这样跑就太麻烦了，一个“一劳永逸”的办法是把这个路径加入环境变量。命令 “PATH=$PATH:路径”可以把这个路径加入环境变量，但是退出这个命令行就失效了。要想永久生效，需要把这行添加到环境变量文件里。有两个文件可选：“/etc/profile”和用户主目录下的“.bash_profile”，“/etc/profile”对系统里所有用户都有效，用户主目录下的“.bash_profile”只对这个用户有效。

　　“PATH=$PATH:路径1:路径2:...:路径n”，

　　意思是可执行文件的路径包括原先设定的路径，也包括从“路径1”到“路径n”的所有路径。当用户输入一个一串字符并按回车后，shell会依次在这些路径里找对应的可执行文件并交给系统核心执行。那个“$PATH”表示原先设定的路径仍然有效，

　　注意不要漏掉。某些软件可能还有“PATH”以外类型的环境变量需要添加，但方法与此相同，并且也需要注意“$”。

　　注意，与DOS/Window不同，UNIX类系统环境变量中**路径名用冒号分隔**，不是分号。另外，软件越装越多，环境变量越添越多，为了避免造成混乱，建议所有语句都添加在文件结尾，按软件的安装顺序添加。

　　格式如下()：

　　# 软件名-版本号

　　PATH=$PATH:路径1:路径2:...:路径n

　　其他环境变量=$其他环境变量:...

　　在“profile”和“.bash_profile”中，“#”是注释符号，写在这里除了视觉分隔外没有任何效果。

　　设置完毕，注销并重新登录，设置就生效了。如果不注销，直接在shell里执行这些语句，也能生效，但是作用范围只限于执行了这些语句的shell。

　　相关的环境变量生效后，就不必老跑到软件的可执行文件目录里去操作了。

　　(from:http://blog.csdn[.NET](http://lib.csdn.net/base/dotnet)/kpgood/archive/2009/03/07/3965446.aspx)

使用linux的朋友越来越多了，在linux下做开发首先就是需要配置环境变量，下面以配置[Java](http://lib.csdn.net/base/javase)环境变量为例介绍三种配置环境变量的方法。

####  配置[Java](http://lib.csdn.net/base/javase)环境变量

##### 1.修改/etc/profile文件

如果你的计算机仅仅作为开发使用时推荐使用这种方法，因为所有用户的shell都有权使用这些环境变量，可能会给系统带来安全性问题。

(1)用文本编辑器打开/etc/profile

(2)在profile文件末尾加入：

JAVA_HOME=/usr/share/jdk1.5.0_05

PATH=/$JAVA_HOME/bin:/$PATH

CLASSPATH=.:/$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar

export JAVA_HOME

export PATH

export CLASSPATH

(3)重新登录

 

注解：

a. 你要将 /usr/share/jdk1.5.0_05jdk 改为你的jdk安装目录

b. linux下用冒号“:”来分隔路径

c. /$PATH / $CLASSPATH / $JAVA_HOME 是用来引用原来的环境变量的值,在设置环境变量时特别要注意不能把原来的值给覆盖掉了，这是一种常见的错误。

d. CLASSPATH中当前目录“.”不能丢,把当前目录丢掉也是常见的错误。

e. export是把这三个变量导出为全局变量。

f. 大小写必须严格区分。

 

##### 2.修改.bashrc文件　　

这种方法更为安全，它可以把使用这些环境变量的权限控制到用户级别，如果你需要给某个用户权限使用这些环境变量，你只需要修改其个人用户主目录下的.bashrc文件就可以了。

 

(1)用文本编辑器打开用户目录下的.bashrc文件

(2)在.bashrc文件末尾加入：　　

set JAVA_HOME=/usr/share/jdk1.5.0_05

export JAVA_HOME

set PATH=/$JAVA_HOME/bin:/$PATH

export PATH

set CLASSPATH=.:/$JAVA_HOME/lib/dt.jar:/$JAVA_HOME/lib/tools.jar

export CLASSPATH

(3)重新登录

 

##### 3.直接在shell下设置变量

不赞成使用这种方法，因为换个shell，你的设置就无效了，因此这种方法仅仅是临时使用，以后要使用的时候又要重新设置，比较麻烦。

 

只需在shell终端执行下列命令：

export JAVA_HOME=/usr/share/jdk1.5.0_05

export PATH=/$JAVA_HOME/bin:/$PATH

export CLASSPATH=.:/$JAVA_HOME/lib/dt.jar:/$JAVA_HOME/lib/tools.jar

 

　　在 linux系统 下，如果你下载并安装了应用程序，很有可能在键入它的名称时出现“ command not found ”的提示内容。如果每次都到安装目标文件夹内，找到可执行文件来进行操作就太繁琐了。这涉及到环境变量 PATH 的设置问题，而 PATH 的设置也是在 linux 下定制环境变量的一个组成部分。本文基于 RedHat 9.0 ，详细讲解了环境变量定制的问题。

### **3.变量简介**

　　Linux 是一个多用户的[操作系统](http://lib.csdn.net/base/operatingsystem)。每个用户登录系统后，都会有一个专用的运行环境。通常每个用户默认的环境都是相同的，这个默认环境实际上就是一组环境变量的定义。用户可以对自己的运行环境进行定制，其方法就是修改相应的系统环境变量。

### **4.常见的环境变量**

　　$PATH：决定了shell将到哪些目录中寻找命令或程序

　　$HOME：当前用户主目录

　　$MAIL：是指当前用户的邮件存放目录。

　　$SHELL：是指当前用户用的是哪种Shell。

　　$HISTSIZE：是指保存历史命令记录的条数

　　$LOGNAME：是指当前用户的登录名。

　　$HOSTNAME：是指主机的名称，许多应用程序如果要用到主机名的话，通常是从这个环境变量中来取得的。

　　$LANG/LANGUGE：是和语言相关的环境变量，使用多种语言的用户可以修改此环境变量。

　　\$PS1：是基本提示符，对于root用户是#，对于普通用户是\$，也可以使用一些更复杂的值。

　　$PS2：是附属提示符，默认是“>”。可以通过修改此环境变量来修改当前的命令符，比如下列命令会将提示符修改成字符串“Hello,My NewPrompt :) ”。

　　　　# PS1=" Hello,My NewPrompt :) "

　　$IFS：输入域分隔符。当shell读取输入时，用来分隔单词的一组字符，它们通常是空格、制表符和换行符。

　　$0：shell脚本的名字。

　　　　例如，在我的Linux系统中：

　　　　\$ echo \$0

　　　　/bin/bash

　　$#：传递给脚本的参数个数。

　　

：shell脚本的进程号，脚本程序通常会用它生成一个唯一的临时文件，如/tmp/tmfile_

　　　　例如，在我的Linux系统中：

　　　　\$ echo \$\$

　　　　31038               #表示当前shell进程号为31038　　

### **5.export命令**

　　export命令将作为他参数的变量导入到子shell中，并使之在子shell中有效。export命令把自己的参数创建为一个环境变量，而这个环境变量可以被其他脚本和当前程序调用的程序看见。

#### **5.1 实验 导出变量**

　　（1）我们先列出脚本程序export2

　　　　#！/bin/sh

　　　　echo "$foo"

　　　　echo "$bar"

　　（2）然后是脚本export1。在这个脚本的结尾，我们调用export2：

　　　　#!/bin/sh

　　　　foo="The first meta-syntactic variable"

　　　　export bar="The second meta-syntactic variable"

　　　　export2

　　运行这个脚本,将得到如下的输出：

　　　　$ export1

　　　　                                         #这是个空格，是因为变量foo在export2中不可用，所以$foo被复制为空

　　　　The second meta-syntactic variable

　　　　$

#### **5.2 设置一个新的环境变量WELCOME**

　　　　$ export WELCOME="Hello!"
　　　　$ echo $WELCOME
　　　　Hello! 

 

### **6.定制环境变量**

　　环境变量是和 Shell 紧密相关的，用户登录系统后就启动了一个 Shell 。对于 Linux 来说一般是 bash ，但也可以重新设定或切换到其它的 Shell 。根据发行版本的情况， bash 有两个基本的系统级配置文件： /etc/bashrc 和 /etc/profile 。这些配置文件包含两组不同的变量： shell 变量和环境变量。前者只是在特定的 shell 中固定（如 bash ），后者在不同 shell 中固定。很明显， shell 变量是局部的，而环境变量是全局的。环境变量是通过 Shell 命令来设置的，设置好的环境变量又可以被所有当前用户所运行的程序所使用。对于 bash 这个 Shell 程序来说，可以通过变量名来访问相应的环境变量，通过 export 来设置环境变量。下面通过几个实例来说明。

#### **6.1 使用命令echo 显示环境变量**

　　#本例使用echo显示常见的变量HOME

　　$ echo $HOME

　　/home/lqm

#### **6.2 设置一个新的环境变量**

　　$ export HELLO=“Hello!”

　　$ echo $HELLO

　　Hello!

#### **6.3 使用 env 命令显示所有的环境变量**

　　$ env

　　SSH_AGENT_PID=1875

　　HOSTNAME=lqm

　　SHELL=/bin/bash

　　TERM=xterm

　　HISTSIZE=1000

　　……

#### **6.4  使用set 命令显示所有本地定义的Shell 变量**

　　$ set

　　BASH=/bin/bash

　　……

#### **6.5  使用 unset 命令来清除环境变量**

　　$ export TEST=“test”       # 增加一个环境变量 TEST

　　$ env | grep TEST               # 此命令有输出，证明环境变量 TEST 已经存在了

　　TEST=test

　　$ unset $TEST                   #删除环境变量TEST

　　$ env | grep TEST              # 此命令无输出，证明环境变量 TEST 已经存在了

#### **6.6  使用 readonly 命令设置只读变量**

　　如果使用了 readonly 命令的话，变量就不可以被修改或清除了。示例如下：

　　$ export TEST="Test"        # 增加一个环境变量 TEST

　　$ readonly TEST                  #将环境变量TEST设为只读

　　$ unset TEST                      #会发现此变量不能被删除

　　-bash: unset: TEST: cannot unset: readonly variable

　　$ TEST="New" #会发现此变量不能被修改

　　-bash: TEST: readonly variable

#### **6.7  用C 程序来访问和设置环境变量**

　　对于 C 程序的用户来说，可以使用下列三个函数来设置或访问一个环境变量。

　　getenv() 访问一个环境变量。输入参数是需要访问的变量名字，返回值是一个字符串。如果所访问的环境变量不存在，则会返回 NULL 。

　　setenv() 在程序里面设置某个环境变量的函数。

　　unsetenv() 清除某个特定的环境变量的函数。

　　另外，还有一个指针变量 environ ，它指向的是包含所有的环境变量的一个列表。下面的程序可以打印出当前运行环境里面的所有环境变量：

```c
#include <stdio.h>
extern char**environ;
int main ()
{
　　char**var;
　　for (var =environ;*var !=NULL;++var)
　　	printf ("%s \n ",*var);
　　return 0;
}
```

#### **6.8 通过修改环境变量定义文件来修改环境变量。**

　　需要注意的是，一般情况下，这仅仅对于普通用户适用，避免修改根用户的环境定义文件，因为那样可能会造成潜在的危险。

　　$vi /etc/bashrc      #修改shell变量　

　　$vi /etc/profile       #修改环境变量定义文件

　　然后编辑你的 PATH 声明，其格式为：

　　PATH=$PATH:\<PATH 1>:\<PATH 2>:\<PATH 3>:------:\<PATH N>

　　你可以自己加上指定的路径，中间用冒号隔开。环境变量更改后，在用户下次登陆时生效，如果想立刻生效，则可执行下面的语句：$ source .bash_profile

　　需要注意的是，最好不要把当前路径 “./” 放到 PATH 里，这样可能会受到意想不到的攻击。完成后，可以通过 $ echo $PATH 查看当前的搜索路径。这样定制后，就可以避免频繁的启动位于 shell 搜索的路径之外的程序了。



### 总结 Linux修改环境变量的几种方式

查看PATH：echo $PATH
以添加mongodb server为列

#### 修改方法一：

export PATH=/usr/local/mongodb/bin:$PATH
//配置完后可以通过echo $PATH查看配置结果。
生效方法：立即生效
有效期限：临时改变，只能在当前的终端窗口中有效，当前窗口关闭后就会恢复原有的path配置
用户局限：仅对当前用户

 

#### 修改方法二：

通过修改.bashrc文件:
vim ~/.bashrc 
//在最后一行添上：
export PATH=/usr/local/mongodb/bin:$PATH
生效方法：（有以下两种）
1、关闭当前终端窗口，重新打开一个新终端窗口就能生效
2、输入“source ~/.bashrc”命令，立即生效
有效期限：永久有效
用户局限：仅对当前用户

 

#### 修改方法三:

通过修改profile文件:
vim /etc/profile
/export PATH //找到设置PATH的行，添加
export PATH=/usr/local/mongodb/bin:$PATH
生效方法：系统重启 若要立即生效，使用命令 source /etc/profile
有效期限：永久有效
用户局限：对所有用户

 

#### 修改方法四:

通过修改environment文件:
vim /etc/environment
在PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games"中加入“:/usr/local/mongodb/bin”
生效方法：系统重启
有效期限：永久有效
用户局限：对所有用户





参考资料:

http://blog.csdn.net/ttwwok/article/details/21403991